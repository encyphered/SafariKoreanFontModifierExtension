<!DOCTYPE HTML>
<html>

<head>
<script>
    function getHosts() {
        var matches = safari.extension.settings['includes'];
        matches = !matches ? [] : matches.split(' ');
        var hosts = [];
        for (var i in matches) {
            var host = matches[i];
            if (host.substring(0,1) == '.') {
                host = '*' + host;
            } else {
                host = '*.' + host;
            }
            if (host.substring(host.length-1, host.length) == '/') {
                host = host + '*';
            } else {
                host = host + '/*';
            }
            hosts.push('http://' + host);
            hosts.push('https://' + host);
        }
        return hosts;
    }

    var includeHosts = getHosts();
    console.log(includeHosts);

    safari.extension.addContentStyleSheetFromURL(
        safari.extension.baseURI + 'force.css',
        includeHosts
    );
</script>
</head>

<body>
</body>

</html>
